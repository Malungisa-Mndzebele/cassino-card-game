# Apache configuration for Casino Card Game API
# This provides reverse proxy for the FastAPI backend

<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Enable proxy modules if available
    <IfModule mod_proxy.c>
        # API endpoints
        RewriteCond %{REQUEST_URI} ^/api/
        RewriteRule ^api/(.*)$ http://localhost:8000/$1 [P,L]
        
        # WebSocket support
        RewriteCond %{HTTP:Upgrade} websocket [NC]
        RewriteCond %{HTTP:Connection} upgrade [NC]
        RewriteRule ^ws/(.*)$ ws://localhost:8000/ws/$1 [P,L]
        
        # Health check endpoint
        RewriteRule ^health$ http://localhost:8000/health [P,L]
    </IfModule>
</IfModule>

# CORS Headers
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, Authorization"
</IfModule>

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>

